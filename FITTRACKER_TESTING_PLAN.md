# FitTracker MVP è‡ªåŠ¨åŒ–æµ‹è¯•æ–¹æ¡ˆ

## ğŸ¯ æµ‹è¯•ç­–ç•¥æ¦‚è§ˆ

**æµ‹è¯•ç›®æ ‡**: ç¡®ä¿ FitTracker MVP åŠŸèƒ½å®Œæ•´ã€æ€§èƒ½ç¨³å®šã€ç”¨æˆ·ä½“éªŒè‰¯å¥½  
**æµ‹è¯•è¦†ç›–**: å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€E2Eæµ‹è¯•ã€æ€§èƒ½æµ‹è¯•  
**æµ‹è¯•å·¥å…·**: Go testifyã€Flutter testã€Postmanã€k6ã€Playwright  
**æµ‹è¯•ç¯å¢ƒ**: å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒã€é¢„ç”Ÿäº§ç¯å¢ƒ  

## ğŸ§ª æµ‹è¯•åˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    E2E æµ‹è¯•å±‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   ç”¨æˆ·æµç¨‹æµ‹è¯•   â”‚  â”‚   è·¨å¹³å°æµ‹è¯•     â”‚  â”‚  æ€§èƒ½æµ‹è¯• â”‚ â”‚
â”‚  â”‚  (Playwright)   â”‚  â”‚  (Flutter)      â”‚  â”‚   (k6)   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   é›†æˆæµ‹è¯•å±‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   API æµ‹è¯•       â”‚  â”‚   æ•°æ®åº“æµ‹è¯•     â”‚  â”‚  ç¬¬ä¸‰æ–¹é›†æˆâ”‚ â”‚
â”‚  â”‚  (Postman)      â”‚  â”‚  (PostgreSQL)   â”‚  â”‚  (å¾®ä¿¡/AI) â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   å•å…ƒæµ‹è¯•å±‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Go å•å…ƒæµ‹è¯•    â”‚  â”‚  Flutter æµ‹è¯•    â”‚  â”‚  å·¥å…·å‡½æ•°  â”‚ â”‚
â”‚  â”‚  (testify)      â”‚  â”‚  (flutter_test) â”‚  â”‚  æµ‹è¯•     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ åç«¯æµ‹è¯• (Go)

### å•å…ƒæµ‹è¯•æ¡†æ¶
```go
// ä½¿ç”¨ testify æ¡†æ¶
import (
    "testing"
    "github.com/stretchr/testify/assert"
    "github.com/stretchr/testify/mock"
    "github.com/stretchr/testify/suite"
)
```

### æ ¸å¿ƒæµ‹è¯•ç”¨ä¾‹

#### 1. ç”¨æˆ·è®¤è¯æµ‹è¯•
```go
func TestUserAuth(t *testing.T) {
    tests := []struct {
        name     string
        phone    string
        password string
        wantErr  bool
    }{
        {
            name:     "æ­£å¸¸ç™»å½•",
            phone:    "13800138000",
            password: "password123",
            wantErr:  false,
        },
        {
            name:     "å¯†ç é”™è¯¯",
            phone:    "13800138000",
            password: "wrongpassword",
            wantErr:  true,
        },
        {
            name:     "ç”¨æˆ·ä¸å­˜åœ¨",
            phone:    "13900139000",
            password: "password123",
            wantErr:  true,
        },
    }

    for _, tt := range tests {
        t.Run(tt.name, func(t *testing.T) {
            user, err := authService.Login(tt.phone, tt.password)
            if tt.wantErr {
                assert.Error(t, err)
                assert.Nil(t, user)
            } else {
                assert.NoError(t, err)
                assert.NotNil(t, user)
                assert.Equal(t, tt.phone, user.Phone)
            }
        })
    }
}
```

#### 2. AI æœåŠ¡æµ‹è¯•
```go
func TestAIService(t *testing.T) {
    mockAI := &MockAIService{}
    
    // è®¾ç½® mock æœŸæœ›
    mockAI.On("GenerateWorkoutPlan", mock.Anything).Return(&PlanResponse{
        Name: "AIç”Ÿæˆè®¡åˆ’",
        Workouts: []Workout{},
    }, nil)
    
    // æµ‹è¯• AI è®¡åˆ’ç”Ÿæˆ
    plan, err := mockAI.GenerateWorkoutPlan(&PlanRequest{
        Goal: "å¢è‚Œ",
        Level: "åˆçº§",
    })
    
    assert.NoError(t, err)
    assert.Equal(t, "AIç”Ÿæˆè®¡åˆ’", plan.Name)
    mockAI.AssertExpectations(t)
}
```

#### 3. æ­å­åŒ¹é…æµ‹è¯•
```go
func TestBuddyMatching(t *testing.T) {
    user := &User{
        ID: 1,
        FitnessTags: []string{"åŠ›é‡è®­ç»ƒ"},
        Location: "åŒ—äº¬å¸‚æœé˜³åŒº",
        FitnessGoal: "å¢è‚Œ",
    }
    
    candidates := []*User{
        {
            ID: 2,
            FitnessTags: []string{"åŠ›é‡è®­ç»ƒ", "æœ‰æ°§è¿åŠ¨"},
            Location: "åŒ—äº¬å¸‚æœé˜³åŒº",
            FitnessGoal: "å¢è‚Œ",
        },
        {
            ID: 3,
            FitnessTags: []string{"ç‘œä¼½"},
            Location: "ä¸Šæµ·å¸‚æµ¦ä¸œåŒº",
            FitnessGoal: "å‡è„‚",
        },
    }
    
    matches := MatchBuddies(user, candidates)
    
    assert.Len(t, matches, 1)
    assert.Equal(t, int64(2), matches[0].User.ID)
    assert.Greater(t, matches[0].Score, 70.0)
}
```

### æµ‹è¯•è¦†ç›–ç‡ç›®æ ‡
- **æ ¸å¿ƒä¸šåŠ¡é€»è¾‘**: 100% è¦†ç›–
- **API æ¥å£**: > 90% è¦†ç›–
- **å·¥å…·å‡½æ•°**: > 80% è¦†ç›–
- **æ•´ä½“è¦†ç›–ç‡**: > 85%

## ğŸ“± å‰ç«¯æµ‹è¯• (Flutter)

### æµ‹è¯•æ¡†æ¶é…ç½®
```yaml
# pubspec.yaml
dev_dependencies:
  flutter_test:
    sdk: flutter
  mockito: ^5.4.4
  integration_test:
    sdk: flutter
```

### æ ¸å¿ƒæµ‹è¯•ç”¨ä¾‹

#### 1. çŠ¶æ€ç®¡ç†æµ‹è¯•
```dart
void main() {
  group('AuthNotifier', () {
    late AuthNotifier notifier;
    late MockAuthRepository mockRepository;
    
    setUp(() {
      mockRepository = MockAuthRepository();
      notifier = AuthNotifier();
    });
    
    test('ç™»å½•æˆåŠŸåº”è¯¥æ›´æ–°çŠ¶æ€', () async {
      // Arrange
      when(mockRepository.login(any, any))
          .thenAnswer((_) async => LoginResponse(
            user: User(id: 1, phone: '13800138000'),
            token: 'token123',
          ));
      
      // Act
      await notifier.login('13800138000', 'password123');
      
      // Assert
      expect(notifier.state.isAuthenticated, true);
      expect(notifier.state.user?.phone, '13800138000');
      expect(notifier.state.token, 'token123');
    });
    
    test('ç™»å½•å¤±è´¥åº”è¯¥æ˜¾ç¤ºé”™è¯¯', () async {
      // Arrange
      when(mockRepository.login(any, any))
          .thenThrow(Exception('ç™»å½•å¤±è´¥'));
      
      // Act
      await notifier.login('13800138000', 'wrongpassword');
      
      // Assert
      expect(notifier.state.isAuthenticated, false);
      expect(notifier.state.error, isNotNull);
    });
  });
}
```

#### 2. Widget æµ‹è¯•
```dart
void main() {
  group('PostCard Widget', () {
    testWidgets('åº”è¯¥æ­£ç¡®æ˜¾ç¤ºåŠ¨æ€å†…å®¹', (tester) async {
      // Arrange
      final post = Post(
        id: 1,
        content: 'æµ‹è¯•åŠ¨æ€å†…å®¹',
        user: User(nickname: 'æµ‹è¯•ç”¨æˆ·'),
        images: ['image1.jpg', 'image2.jpg'],
        likesCount: 10,
      );
      
      // Act
      await tester.pumpWidget(
        MaterialApp(
          home: PostCard(post: post),
        ),
      );
      
      // Assert
      expect(find.text('æµ‹è¯•åŠ¨æ€å†…å®¹'), findsOneWidget);
      expect(find.text('æµ‹è¯•ç”¨æˆ·'), findsOneWidget);
      expect(find.text('10'), findsOneWidget);
      expect(find.byType(Image), findsNWidgets(2));
    });
    
    testWidgets('ç‚¹å‡»ç‚¹èµåº”è¯¥è§¦å‘å›è°ƒ', (tester) async {
      // Arrange
      bool liked = false;
      final post = Post(id: 1, content: 'æµ‹è¯•');
      
      // Act
      await tester.pumpWidget(
        MaterialApp(
          home: PostCard(
            post: post,
            onLike: () => liked = true,
          ),
        ),
      );
      
      await tester.tap(find.byIcon(Icons.favorite_border));
      await tester.pump();
      
      // Assert
      expect(liked, true);
    });
  });
}
```

#### 3. é›†æˆæµ‹è¯•
```dart
void main() {
  group('ç”¨æˆ·ç™»å½•æµç¨‹', () {
    testWidgets('å®Œæ•´ç™»å½•æµç¨‹æµ‹è¯•', (tester) async {
      // å¯åŠ¨åº”ç”¨
      await tester.pumpWidget(MyApp());
      
      // ç­‰å¾…åº”ç”¨åŠ è½½
      await tester.pumpAndSettle();
      
      // è¾“å…¥æ‰‹æœºå·
      await tester.enterText(find.byKey(Key('phone_field')), '13800138000');
      
      // è¾“å…¥å¯†ç 
      await tester.enterText(find.byKey(Key('password_field')), 'password123');
      
      // ç‚¹å‡»ç™»å½•æŒ‰é’®
      await tester.tap(find.byKey(Key('login_button')));
      await tester.pumpAndSettle();
      
      // éªŒè¯è·³è½¬åˆ°é¦–é¡µ
      expect(find.text('é¦–é¡µ'), findsOneWidget);
      expect(find.text('13800138000'), findsOneWidget);
    });
  });
}
```

## ğŸ”Œ API é›†æˆæµ‹è¯•

### Postman æµ‹è¯•é›†åˆ
```json
{
  "info": {
    "name": "FitTracker API Tests",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "ç”¨æˆ·è®¤è¯",
      "item": [
        {
          "name": "ç”¨æˆ·æ³¨å†Œ",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\"phone\":\"13800138000\",\"password\":\"password123\"}"
            },
            "url": "{{base_url}}/auth/register"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('çŠ¶æ€ç åº”è¯¥æ˜¯200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('å“åº”åŒ…å«ç”¨æˆ·ä¿¡æ¯', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.user).to.have.property('id');",
                  "    pm.expect(jsonData.data.user).to.have.property('phone');",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    }
  ]
}
```

### è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬
```bash
#!/bin/bash
# run_api_tests.sh

echo "å¼€å§‹ API é›†æˆæµ‹è¯•..."

# å¯åŠ¨æµ‹è¯•ç¯å¢ƒ
docker-compose -f docker-compose.test.yml up -d

# ç­‰å¾…æœåŠ¡å¯åŠ¨
sleep 30

# è¿è¡Œ Postman æµ‹è¯•
newman run tests/postman/FitTracker_API_Tests.postman_collection.json \
  --environment tests/postman/test_environment.json \
  --reporters cli,json \
  --reporter-json-export test_results.json

# æ£€æŸ¥æµ‹è¯•ç»“æœ
if [ $? -eq 0 ]; then
    echo "âœ… API æµ‹è¯•é€šè¿‡"
else
    echo "âŒ API æµ‹è¯•å¤±è´¥"
    exit 1
fi

# æ¸…ç†æµ‹è¯•ç¯å¢ƒ
docker-compose -f docker-compose.test.yml down
```

## âš¡ æ€§èƒ½æµ‹è¯• (k6)

### è´Ÿè½½æµ‹è¯•è„šæœ¬
```javascript
import http from 'k6/http';
import { check, sleep } from 'k6';

export let options = {
  stages: [
    { duration: '2m', target: 100 }, // 2åˆ†é’Ÿå†…è¾¾åˆ°100ç”¨æˆ·
    { duration: '5m', target: 100 }, // ä¿æŒ100ç”¨æˆ·5åˆ†é’Ÿ
    { duration: '2m', target: 200 }, // 2åˆ†é’Ÿå†…è¾¾åˆ°200ç”¨æˆ·
    { duration: '5m', target: 200 }, // ä¿æŒ200ç”¨æˆ·5åˆ†é’Ÿ
    { duration: '2m', target: 0 },   // 2åˆ†é’Ÿå†…é™åˆ°0ç”¨æˆ·
  ],
  thresholds: {
    http_req_duration: ['p(95)<200'], // 95%çš„è¯·æ±‚å“åº”æ—¶é—´å°äº200ms
    http_req_failed: ['rate<0.1'],   // é”™è¯¯ç‡å°äº10%
  },
};

const BASE_URL = 'https://api.fittracker.com/api/v1';

export default function() {
  // æµ‹è¯•ç”¨æˆ·ç™»å½•
  let loginResponse = http.post(`${BASE_URL}/auth/login`, JSON.stringify({
    phone: '13800138000',
    password: 'password123'
  }), {
    headers: { 'Content-Type': 'application/json' },
  });
  
  check(loginResponse, {
    'ç™»å½•çŠ¶æ€ç æ˜¯200': (r) => r.status === 200,
    'ç™»å½•å“åº”æ—¶é—´å°äº200ms': (r) => r.timings.duration < 200,
  });
  
  let token = loginResponse.json('data.token');
  
  // æµ‹è¯•è·å–åŠ¨æ€åˆ—è¡¨
  let postsResponse = http.get(`${BASE_URL}/posts`, {
    headers: { 'Authorization': `Bearer ${token}` },
  });
  
  check(postsResponse, {
    'åŠ¨æ€åˆ—è¡¨çŠ¶æ€ç æ˜¯200': (r) => r.status === 200,
    'åŠ¨æ€åˆ—è¡¨å“åº”æ—¶é—´å°äº300ms': (r) => r.timings.duration < 300,
  });
  
  sleep(1);
}
```

### å‹åŠ›æµ‹è¯•è„šæœ¬
```javascript
import http from 'k6/http';
import { check } from 'k6';

export let options = {
  vus: 1000, // 1000ä¸ªè™šæ‹Ÿç”¨æˆ·
  duration: '10m', // æŒç»­10åˆ†é’Ÿ
  thresholds: {
    http_req_duration: ['p(99)<500'], // 99%çš„è¯·æ±‚å“åº”æ—¶é—´å°äº500ms
    http_req_failed: ['rate<0.05'],  // é”™è¯¯ç‡å°äº5%
  },
};

export default function() {
  let response = http.get('https://api.fittracker.com/api/v1/posts');
  
  check(response, {
    'çŠ¶æ€ç æ˜¯200': (r) => r.status === 200,
    'å“åº”æ—¶é—´åˆç†': (r) => r.timings.duration < 1000,
  });
}
```

## ğŸ­ E2E æµ‹è¯• (Playwright)

### ç”¨æˆ·æµç¨‹æµ‹è¯•
```javascript
const { test, expect } = require('@playwright/test');

test.describe('FitTracker E2E æµ‹è¯•', () => {
  test('å®Œæ•´ç”¨æˆ·æ³¨å†Œç™»å½•æµç¨‹', async ({ page }) => {
    // è®¿é—®åº”ç”¨
    await page.goto('https://app.fittracker.com');
    
    // ç‚¹å‡»æ³¨å†ŒæŒ‰é’®
    await page.click('text=æ³¨å†Œ');
    
    // å¡«å†™æ³¨å†Œä¿¡æ¯
    await page.fill('input[placeholder="æ‰‹æœºå·"]', '13800138000');
    await page.fill('input[placeholder="å¯†ç "]', 'password123');
    await page.fill('input[placeholder="éªŒè¯ç "]', '123456');
    
    // ç‚¹å‡»æ³¨å†Œ
    await page.click('button[type="submit"]');
    
    // éªŒè¯æ³¨å†ŒæˆåŠŸ
    await expect(page).toHaveURL(/.*home/);
    await expect(page.locator('text=13800138000')).toBeVisible();
  });
  
  test('å‘å¸ƒåŠ¨æ€æµç¨‹', async ({ page }) => {
    // ç™»å½•
    await page.goto('https://app.fittracker.com/login');
    await page.fill('input[placeholder="æ‰‹æœºå·"]', '13800138000');
    await page.fill('input[placeholder="å¯†ç "]', 'password123');
    await page.click('button[type="submit"]');
    
    // è¿›å…¥ç¤¾åŒºé¡µé¢
    await page.click('text=ç¤¾åŒº');
    
    // ç‚¹å‡»å‘å¸ƒåŠ¨æ€
    await page.click('button:has-text("å‘å¸ƒåŠ¨æ€")');
    
    // å¡«å†™åŠ¨æ€å†…å®¹
    await page.fill('textarea[placeholder="åˆ†äº«ä½ çš„å¥èº«å¿ƒå¾—..."]', 'ä»Šå¤©å®Œæˆäº†45åˆ†é’Ÿçš„åŠ›é‡è®­ç»ƒï¼');
    
    // ä¸Šä¼ å›¾ç‰‡
    await page.setInputFiles('input[type="file"]', 'test_images/workout.jpg');
    
    // å‘å¸ƒ
    await page.click('button:has-text("å‘å¸ƒ")');
    
    // éªŒè¯å‘å¸ƒæˆåŠŸ
    await expect(page.locator('text=ä»Šå¤©å®Œæˆäº†45åˆ†é’Ÿçš„åŠ›é‡è®­ç»ƒï¼')).toBeVisible();
  });
  
  test('AIè®­ç»ƒè®¡åˆ’ç”Ÿæˆ', async ({ page }) => {
    // ç™»å½•å¹¶è¿›å…¥è®­ç»ƒé¡µé¢
    await page.goto('https://app.fittracker.com/workout');
    
    // ç‚¹å‡»AIæ•™ç»ƒ
    await page.click('text=AIæ•™ç»ƒ');
    
    // å¡«å†™è®­ç»ƒéœ€æ±‚
    await page.selectOption('select[name="goal"]', 'å¢è‚Œ');
    await page.selectOption('select[name="level"]', 'åˆçº§');
    await page.selectOption('select[name="duration"]', '4å‘¨');
    
    // ç”Ÿæˆè®¡åˆ’
    await page.click('button:has-text("ç”Ÿæˆè®¡åˆ’")');
    
    // ç­‰å¾…AIç”Ÿæˆ
    await page.waitForSelector('text=è®¡åˆ’ç”Ÿæˆå®Œæˆ', { timeout: 30000 });
    
    // éªŒè¯è®¡åˆ’ç”Ÿæˆ
    await expect(page.locator('text=AIç”Ÿæˆå¢è‚Œè®¡åˆ’')).toBeVisible();
    await expect(page.locator('button:has-text("ä½¿ç”¨è®¡åˆ’")')).toBeVisible();
  });
});
```

## ğŸ“Š æµ‹è¯•æŠ¥å‘Šå’Œç›‘æ§

### æµ‹è¯•æŠ¥å‘Šç”Ÿæˆ
```bash
#!/bin/bash
# generate_test_report.sh

echo "ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š..."

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
echo "è¿è¡Œå•å…ƒæµ‹è¯•..."
go test -v -coverprofile=coverage.out ./...

echo "è¿è¡ŒFlutteræµ‹è¯•..."
flutter test --coverage

echo "è¿è¡ŒAPIæµ‹è¯•..."
newman run tests/postman/FitTracker_API_Tests.postman_collection.json \
  --reporters cli,json \
  --reporter-json-export api_test_results.json

echo "è¿è¡Œæ€§èƒ½æµ‹è¯•..."
k6 run tests/performance/load_test.js --out json=performance_results.json

echo "è¿è¡ŒE2Eæµ‹è¯•..."
npx playwright test --reporter=json --output-file=e2e_results.json

# ç”Ÿæˆç»¼åˆæŠ¥å‘Š
node scripts/generate_test_report.js
```

### æµ‹è¯•ç›‘æ§é¢æ¿
```yaml
# Grafana Dashboard é…ç½®
dashboard:
  title: "FitTracker æµ‹è¯•ç›‘æ§"
  panels:
    - title: "æµ‹è¯•è¦†ç›–ç‡"
      type: "stat"
      targets:
        - expr: "go_test_coverage"
    - title: "APIå“åº”æ—¶é—´"
      type: "graph"
      targets:
        - expr: "api_response_time_p95"
    - title: "æµ‹è¯•é€šè¿‡ç‡"
      type: "stat"
      targets:
        - expr: "test_pass_rate"
```

## ğŸš€ CI/CD é›†æˆ

### GitHub Actions é…ç½®
```yaml
name: FitTracker Tests

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  backend-tests:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-go@v3
        with:
          go-version: '1.24'
      
      - name: è¿è¡ŒGoæµ‹è¯•
        run: |
          go test -v -coverprofile=coverage.out ./...
          go tool cover -html=coverage.out -o coverage.html
      
      - name: ä¸Šä¼ è¦†ç›–ç‡æŠ¥å‘Š
        uses: codecov/codecov-action@v3
        with:
          file: ./coverage.out

  frontend-tests:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: subosito/flutter-action@v2
        with:
          flutter-version: '3.16.0'
      
      - name: è¿è¡ŒFlutteræµ‹è¯•
        run: |
          flutter test --coverage
          flutter test integration_test/
      
      - name: ä¸Šä¼ æµ‹è¯•æŠ¥å‘Š
        uses: actions/upload-artifact@v3
        with:
          name: flutter-test-results
          path: test/

  api-tests:
    runs-on: ubuntu-latest
    services:
      postgres:
        image: postgres:15
        env:
          POSTGRES_PASSWORD: test
        options: >-
          --health-cmd pg_isready
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
      
      redis:
        image: redis:7
        options: >-
          --health-cmd "redis-cli ping"
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
    
    steps:
      - uses: actions/checkout@v3
      
      - name: å¯åŠ¨åç«¯æœåŠ¡
        run: |
          docker-compose -f docker-compose.test.yml up -d
          sleep 30
      
      - name: è¿è¡ŒAPIæµ‹è¯•
        run: |
          npm install -g newman
          newman run tests/postman/FitTracker_API_Tests.postman_collection.json
      
      - name: è¿è¡Œæ€§èƒ½æµ‹è¯•
        run: |
          npm install -g k6
          k6 run tests/performance/load_test.js

  e2e-tests:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: å®‰è£…Playwright
        run: |
          npm install
          npx playwright install
      
      - name: è¿è¡ŒE2Eæµ‹è¯•
        run: |
          npx playwright test
      
      - name: ä¸Šä¼ æµ‹è¯•ç»“æœ
        uses: actions/upload-artifact@v3
        if: always()
        with:
          name: playwright-report
          path: playwright-report/
```

## ğŸ“‹ æµ‹è¯•æ£€æŸ¥æ¸…å•

### åŠŸèƒ½æµ‹è¯•æ£€æŸ¥æ¸…å•
- [ ] ç”¨æˆ·æ³¨å†Œç™»å½•åŠŸèƒ½æ­£å¸¸
- [ ] å¾®ä¿¡/Appleç™»å½•é›†æˆæ­£å¸¸
- [ ] åŠ¨æ€å‘å¸ƒå’Œæµè§ˆåŠŸèƒ½æ­£å¸¸
- [ ] ç‚¹èµè¯„è®ºåŠŸèƒ½æ­£å¸¸
- [ ] AIè®­ç»ƒè®¡åˆ’ç”Ÿæˆæ­£å¸¸
- [ ] è®­ç»ƒè®°å½•åŠŸèƒ½æ­£å¸¸
- [ ] æ­å­æ¨èå’Œç”³è¯·æ­£å¸¸
- [ ] æ•™ç»ƒæœåŠ¡åŠŸèƒ½æ­£å¸¸

### æ€§èƒ½æµ‹è¯•æ£€æŸ¥æ¸…å•
- [ ] APIå“åº”æ—¶é—´ < 200ms
- [ ] åº”ç”¨å¯åŠ¨æ—¶é—´ < 3s
- [ ] å¹¶å‘ç”¨æˆ·æ•° > 1000
- [ ] æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½è‰¯å¥½
- [ ] å›¾ç‰‡åŠ è½½é€Ÿåº¦æ­£å¸¸
- [ ] å†…å­˜ä½¿ç”¨åˆç†

### å®‰å…¨æµ‹è¯•æ£€æŸ¥æ¸…å•
- [ ] ç”¨æˆ·å¯†ç åŠ å¯†å­˜å‚¨
- [ ] JWT Tokenå®‰å…¨
- [ ] SQLæ³¨å…¥é˜²æŠ¤
- [ ] XSSæ”»å‡»é˜²æŠ¤
- [ ] æ–‡ä»¶ä¸Šä¼ å®‰å…¨
- [ ] APIæ¥å£é™æµ

### å…¼å®¹æ€§æµ‹è¯•æ£€æŸ¥æ¸…å•
- [ ] Android 5.0+ å…¼å®¹
- [ ] iOS 12.0+ å…¼å®¹
- [ ] ä¸åŒå±å¹•å°ºå¯¸é€‚é…
- [ ] ç½‘ç»œç¯å¢ƒé€‚é…
- [ ] æµè§ˆå™¨å…¼å®¹æ€§

---

## ğŸ¯ æ€»ç»“

è¿™ä¸ªè‡ªåŠ¨åŒ–æµ‹è¯•æ–¹æ¡ˆæä¾›äº† FitTracker MVP çš„å®Œæ•´æµ‹è¯•è¦†ç›–ï¼š

1. **å¤šå±‚æ¬¡æµ‹è¯•æ¶æ„** - å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€E2Eæµ‹è¯•
2. **è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·** - Go testifyã€Flutter testã€Postmanã€k6ã€Playwright
3. **CI/CD é›†æˆ** - GitHub Actions è‡ªåŠ¨åŒ–æµ‹è¯•æµç¨‹
4. **æ€§èƒ½ç›‘æ§** - å®æ—¶æ€§èƒ½æŒ‡æ ‡ç›‘æ§
5. **æµ‹è¯•æŠ¥å‘Š** - è¯¦ç»†çš„æµ‹è¯•ç»“æœå’Œè¦†ç›–ç‡æŠ¥å‘Š

**å…³é”®ä¼˜åŠ¿:**
- å…¨é¢çš„æµ‹è¯•è¦†ç›–ï¼Œç¡®ä¿è´¨é‡
- è‡ªåŠ¨åŒ–æµ‹è¯•æµç¨‹ï¼Œæé«˜æ•ˆç‡
- æŒç»­é›†æˆï¼Œå¿«é€Ÿå‘ç°é—®é¢˜
- æ€§èƒ½ç›‘æ§ï¼Œä¿è¯ç”¨æˆ·ä½“éªŒ

**ä¸‹ä¸€æ­¥:**
1. æ­å»ºæµ‹è¯•ç¯å¢ƒå’Œå·¥å…·
2. ç¼–å†™æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•ç”¨ä¾‹
3. é…ç½® CI/CD è‡ªåŠ¨åŒ–æµç¨‹
4. å»ºç«‹æµ‹è¯•ç›‘æ§å’ŒæŠ¥å‘Šæœºåˆ¶
